* 模型设计

- note表
| 字段    | 含义         | 约束 | 类型   | 备注                    |
|---------+--------------+------+--------+-------------------------|
| id      | 笔记唯一id   | 主键 | 字符串 | uuid                    |
| status  | 笔记状态     | 非空 | 数值   | 原始笔记(0),进化笔记(1) |
| content | 笔记内容     | 非空 | 字符串 |                         |
| resume  | 笔记概要     | 可空 | 字符串 |                         |
| child   | 进化笔记     | 可空 | 字符串 | 进化后的笔记id          |
| refs    | 笔记引用     | 可空 | 列表   | 引用一个或多个笔记id    |
| tag     | 笔记标签     | 可空 | 列表   |                         |
| time    | 笔记创建时间 | 非空 | 数值   | 取秒数                  |

* 功能设计
- timeline 时间轴
- tree 进化树
- content 笔记内容

| 命令                    | 参数 | 功能                     | 交互/备注                                                                                 |
|-------------------------+------+--------------------------+-------------------------------------------------------------------------------------------|
| xnote-show              |      | 显示主界面               | 时间轴,进化树,笔记内容                                                                    |
| xnote-timeline-show     |      | 显示时间轴               | 时间轴中显示当前日期的所有原始笔记时间点                                                  |
| xnote-tree-show         | time | 显示进化树               | 进化树中笔记只展示摘要(title)                                                             |
| xnote-content-show      | time | 显示笔记内容             | 默认显示当前原始笔记的内容，命令选择显示进化树中笔记内容                                  |
|-------------------------+------+--------------------------+-------------------------------------------------------------------------------------------|
| xnote-timeline-current  |      | 跳转到当前日期           |                                                                                           |
| xnote-timeline-next     |      | 跳转到下一个日期         |                                                                                           |
| xnote-timeline-previous |      | 跳转到上一个日期         |                                                                                           |
| xnote-timeline-jump     |      | 跳转到指定日期(日历选择) |                                                                                           |
|-------------------------+------+--------------------------+-------------------------------------------------------------------------------------------|
| xnote-tree-evolve       | id   | 新增(修改)当前笔记的进化 | 新增:针对进化树上最新的进化笔记;修改:针对历史进化笔记，弹出引用笔记列表，选择一个作为进化 |
| xnote-tree-refer        | id   | 给当前笔记添加引用       | 对于历史进化笔记，添加新的笔记是否需要重新 *修改* 它的进化？                              |
| xnote-tree-reverse      | time | 进化树倒排序和正排序     | 默认排序方式用变量控制(asc/desc)                                                          |

| 函数                 | 参数 | 功能                             | emacsql sql                                                                |
|----------------------+------+----------------------------------+----------------------------------------------------------------------------|
| xnote-time-list      | date | 返回特定日期的所有原始笔记time   | select time from note where (and (= flag 0) (> time date) (< time date+1)) |
| xnote-tree-list      | time | 返回当前时间原始笔记的进化树列表 | select resume from note where (and (= flag 1) (= time time)) 根节点        |
| xnote-content-detail | id   | 返回特定笔记的内容               | select content from note where (= id id)                                   |
